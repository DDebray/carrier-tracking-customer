<hero hero-title="'SECTION.HERO.TITLE' | translate"
    hero-image="url(images/hero/default.jpg)">
    <form class="hero__form"
        ng-submit="tracking.getStatus()"
        autocomplete="off">
        <div class="hero__form__elements">
            <input class="hero__form__input hero__form__input--default"
                type="text"
                name="tracking_number"
                placeholder="{{'SECTION.HERO.PLACEHOLDER' | translate}}"
                required
                ng-model="tracking.trackingId"
                select-on-click
                autofocus>
            <button class="hero__form__submit"
                type="submit"
                name="submit"
                ng-bind="'SECTION.HERO.TRACK_BUTTON' | translate"></button>
        </div>
    </form>
</hero>

<section class="section">
    <div class="section__inner section__inner--slim"
        ng-class="{ 'section__inner--centered' : tracking.showError }">

        <h2 ng-if="tracking.showError"
            ng-bind="'PAGE.TRACKING.ERROR_TITLE' | translate"></h2>
        <p ng-if="tracking.showError && ('PAGE.TRACKING.ERROR_DESCRIPTION' | translate) !== 'PAGE.TRACKING.ERROR_DESCRIPTION'"
            ng-bind="'PAGE.TRACKING.ERROR_DESCRIPTION' | translate"></p>


        <!-- statecrumbs -->
        <div class="row row-outer-block">
            <div class="column small-12">
                <div class="statecrumbs"
                    ng-if="tracking.data && !tracking.showError">
                    <span class="statecrumbs__angle fa fa-{{state.angle}}"
                        ng-repeat-start="state in tracking.packageStates"
                        ng-if="state.angle && state.isActive"
                        ng-class="{ 'statecrumbs__angle--is-visible' : state.isActive() }"></span>

                    <span class="statecrumbs__state fa fa-{{state.icon()}} {{state.iconModifier}}"
                        ng-repeat-end
                        ng-class="{ 'statecrumbs__state--is-active' : state.isActive(), 'statecrumbs__state--is-error' : state.showError() }"
                        tooltip="{ on : 'enter', translation : ('PAGE.TRACKING.SUMMARY.TOOLTIP' + (state.showCross() ? '_IS_ERROR.' : (state.isActive() ? '_IS_ACTIVE.' : '.')) + state.tooltip.toUpperCase()), directionY : 'up', class : (state.isActive() ? 'ui-tooltip--centered --is-active' : 'ui-tooltip--centered') }">

                        <span class="statecrumbs__icon {{state.iconModifier}}"
                            ng-class="{ 'statecrumbs__icon--success' : state.showCheckmark(), 'statecrumbs__icon--error' : state.showCross() }"></span>
                    </span>
                </div>
            </div>
        </div>

        <div class="row row-outer-block summary"
            ng-if="tracking.data  && !tracking.showError">
            <div class="column small-12 medium-6">
                <span class="summary__title"
                    ng-bind="'PAGE.TRACKING.SUMMARY_TRACKING_NUMBER' | translate"></span>
                <span ng-bind="tracking.data.id.toUpperCase()"></span>
            </div>
            <div class="column small-12 medium-6">
                <span class="summary__title"
                    ng-bind="'PAGE.TRACKING.SUMMARY_STATE' | translate"></span>
                <span ng-bind="('PAGE.TRACKING.SUMMARY_STATE.' + tracking.data.events[tracking.data.events.length - 1].status.toUpperCase()) | translate"></span>
            </div>
        </div>

        <div class="timeline">
            <!-- timeline -->
            <div class="row row-outer-block timeline__event"
                ng-repeat="event in tracking.data.events"
                ng-class="{'timeline__event--is-only-child' : (tracking.data.events.length === 1)}">

                <!-- date -->
                <div class="column medium-3 show-for-medium">
                    <div class="timeline__date"
                        title="{{ event.moment | moment:'long' }}">
                        <div class="timeline__date__text show-for-medium-only"
                            ng-bind="event.moment | moment:'short-day'"></div>
                        <div class="timeline__date__text show-for-large"
                            ng-bind="event.moment | moment:'day'"></div>
                        <div class="timeline__date__text"
                            ng-bind="event.moment | moment:'time'"></div>
                    </div>
                </div>

                <!-- state -->
                <div class="column small-2 medium-1 timeline__state-container">
                    <div class="timeline__state timeline__state--small fa fa-check"
                        ng-class="{ 'timeline__state--process-is-completed' : ($last && event.status === 'DELIVERED')}"></div>
                    <div class="timeline__state-line"></div>
                </div>

                <!-- text -->
                <div class="column small-10 medium-8">

                    <div class="timeline__date timeline__date--small show-for-small-only"
                        title="{{ event.moment | moment:'long' }}"
                        ng-bind="(event.moment | moment:'day') + ', ' + (event.moment | moment:'time')"></div>

                    <span class="timeline__description">
                        <div class="timeline__description-text">
                            <span ng-bind="('PAGE.TRACKING.TIMELINE.EVENT.' + event.description.toUpperCase() | translate)
                            .replace('%CITY%', event.location.city || '')
                            .replace('%COUNTRY%', event.location.country || '') + '&nbsp;'"></span>

                            <span class="timeline__carrier"
                                ng-if="event.carrier && tracking.carrierInfo.length > 1"
                                ng-bind="('COMMON.CARRIER.' + event.carrier.code.toUpperCase()) | translate"></span>
                        </div>
                    </span>

                </div>
            </div>
        </div>

        <!-- carrier info -->
        <div class="row row-outer-block align-center">
            <div class="column small-12 medium-6 large-4"
                ng-repeat="carrier in tracking.carrierInfo">
                <div class="carrier-info">

                    <div class="carrier-info__logo" ng-class="'image-carrier-' + carrier.code"></div>

                    <a class="link carrier-info__link" ng-if="(('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.URL') | translate) !== ('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.URL')" href="{{('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.URL') | translate}}" target="_blank">
                        <span ng-bind="('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.URL_NAME') | translate"></span>
                    </a>

                    <a class="link carrier-info__mail" ng-if="(('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.MAIL') | translate) !== ('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.MAIL')" href="mailto:{{('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.MAIL') | translate}}" ng-bind="('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.MAIL') | translate"></a>

                    <a class="link carrier-info__tel" ng-if="(('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.TEL') | translate) !== ('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.TEL')" href="tel:{{('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.TEL') | translate}}" ng-bind="('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.TEL') | translate"></a>

                    <span class="carrier-info__additional-info" ng-if="(('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.ADDITIONAL_INFO') | translate) !== ('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.ADDITIONAL_INFO')" ng-bind="('COMMON.CARRIER.' + carrier.code.toUpperCase() + '.ADDITIONAL_INFO') | translate"></span>

                </div>
            </div>
        </div>

    </div>
</section>



<banner banner-title="'SECTION.FOOTER.TITLE' | translate"
    banner-subtitle="'SECTION.FOOTER.SUBTITLE' | translate"
    tracking-id="{{tracking.data.id.toUpperCase()}}"></banner>
