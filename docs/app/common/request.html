<!DOCTYPE html><html lang="en"><head><title>app/common/request</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../"><meta name="groc-document-path" content="app/common/request"><meta name="groc-project-path" content="assets/js/app/common/request.js"><meta name="groc-github-url" content="https://github.com/zooron/carrier-tracking-customer"><link rel="stylesheet" type="text/css" media="all" href="../../assets/style.css"><script type="text/javascript" src="../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/zooron/carrier-tracking-customer/blob/master/assets/js/app/common/request.js">assets/js/app/common/request.js</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-built_in">module</span>.exports = [<span class="hljs-string">'$resource'</span>, <span class="hljs-string">'$http'</span>, <span class="hljs-string">'CommonConfig'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$resource, $http, CommonConfig</span>) </span>{
<span class="hljs-pi">  'use strict'</span>;

  <span class="hljs-keyword">var</span> generateResource = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">route, endpoint, paramDefaults, actions, options</span>) </span>{
    <span class="hljs-keyword">if</span> (actions) {
      angular.forEach(actions, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">action</span>) </span>{
        action.url = CommonConfig.endpoints[endpoint][CommonConfig.environment()] + action.url;
      });
    }

    <span class="hljs-keyword">return</span> $resource((endpoint ? CommonConfig.endpoints[endpoint][CommonConfig.environment()] : <span class="hljs-string">'/'</span>) + route, paramDefaults, actions, options);
  };

  $http.defaults.headers.common.env = <span class="hljs-string">'production'</span>; <span class="hljs-comment">// todo: hard coded</span>
  $http.defaults.headers.common.locale = <span class="hljs-string">'de-DE'</span>; <span class="hljs-comment">// todo: hard coded - COUREON-347</span>

  <span class="hljs-keyword">return</span> {
    tracking: generateResource(<span class="hljs-string">'tracking'</span>, <span class="hljs-string">'cx'</span>, <span class="hljs-literal">null</span>, {
      getStatus: {
        method: <span class="hljs-string">'GET'</span>,
        url: <span class="hljs-string">'tracking/:trackingId'</span>
      }
    }),
    shipment : generateResource(<span class="hljs-string">'shipment'</span>, <span class="hljs-string">'cx'</span>, <span class="hljs-literal">null</span>, {
      create : {
        method : <span class="hljs-string">'POST'</span>,
        url : <span class="hljs-string">'shipment/create'</span>
      }
    }),
    transaction : generateResource(<span class="hljs-string">'transaction'</span>, <span class="hljs-string">'cx'</span>, <span class="hljs-literal">null</span>, {
      start : {
        method : <span class="hljs-string">'POST'</span>,
        url : <span class="hljs-string">'transaction/start'</span>
      }
    }),
    countries : generateResource(<span class="hljs-string">'countries'</span>, <span class="hljs-string">'cx'</span>),</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>transaction: generateResource(&#39;transaction&#39;, &#39;cx&#39;, null, {
  start: {
    method: &#39;POST&#39;,
    url:
  }</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-comment">// ),</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>externalTracking : generateResource(&#39;tracking&#39;, &#39;ruediger&#39;, null, {
  getStatus : {
    method : &#39;GET&#39;,
    url : &#39;tracking/:trackingId&#39;
  }</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-comment">// ),</span>
    cms: {
      news: generateResource(<span class="hljs-string">'news'</span>, <span class="hljs-string">'cms'</span>),
      cooperations: generateResource(<span class="hljs-string">'cooperations'</span>, <span class="hljs-string">'cms'</span>)
    }
  };
}];</div></div></div></div></body></html>