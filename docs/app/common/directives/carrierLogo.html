<!DOCTYPE html><html lang="en"><head><title>app/common/directives/carrierLogo</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../"><meta name="groc-document-path" content="app/common/directives/carrierLogo"><meta name="groc-project-path" content="assets/js/app/common/directives/carrierLogo.js"><meta name="groc-github-url" content="https://github.com/zooron/carrier-tracking-customer"><link rel="stylesheet" type="text/css" media="all" href="../../../assets/style.css"><script type="text/javascript" src="../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/zooron/carrier-tracking-customer/blob/master/assets/js/app/common/directives/carrierLogo.js">assets/js/app/common/directives/carrierLogo.js</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">  'use strict'</span>;

  <span class="hljs-keyword">return</span> {
    restrict: <span class="hljs-string">'A'</span>,
    scope: {
      rate: <span class="hljs-string">'&amp;carrierLogo'</span>,
      useDimensions: <span class="hljs-string">'&amp;useDimensions'</span>,
    },
    templateUrl: <span class="hljs-string">'/views/partials/carrier_logo.html'</span>,
    link: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope</span>) </span>{
      <span class="hljs-keyword">var</span> carrierLinks = {
        myhermes : <span class="hljs-string">'hermes'</span>,
        gel : <span class="hljs-string">'gelexpress'</span>,
        ccl : <span class="hljs-string">'cclogistics'</span>
      },
      validCarriers = [
        <span class="hljs-string">'amazon'</span>,
        <span class="hljs-string">'dhl'</span>,
        <span class="hljs-string">'dpag'</span>,
        <span class="hljs-string">'dpd'</span>,
        <span class="hljs-string">'hermes'</span>,
        <span class="hljs-string">'nexive'</span>,
        <span class="hljs-string">'ups'</span>,
        <span class="hljs-string">'gelexpress'</span>,
        <span class="hljs-string">'cclogistics'</span>,
        <span class="hljs-string">'btg'</span>,
        <span class="hljs-string">'sovereign'</span>,
        <span class="hljs-string">'ijs'</span>,
        <span class="hljs-string">'boxberry'</span>,
        <span class="hljs-string">'borderguru'</span>,
        <span class="hljs-string">'atpost'</span>,
        <span class="hljs-string">'gls'</span>,
        <span class="hljs-string">'yodel'</span>
      ];

      <span class="hljs-keyword">var</span> rateCode = (scope.rate() || {}).code || <span class="hljs-string">''</span>;

      <span class="hljs-comment">/*rateCode = [validCarriers[Math.round((Math.random() * (validCarriers.length - 1)))]];
      if (!!Math.round(Math.random())) {
        rateCode.push(validCarriers[Math.round((Math.random() * (validCarriers.length - 1)))]);
      }
      rateCode = rateCode.join('_');*/</span>

      scope.useDimensions = scope.useDimensions();
      scope.carriers = rateCode.split(<span class="hljs-string">'_'</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">segment</span>) </span>{
        <span class="hljs-keyword">return</span> carrierLinks[segment] || segment;
      }).filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">segment</span>) </span>{
        <span class="hljs-keyword">return</span> validCarriers.indexOf(segment) !== -<span class="hljs-number">1</span>;
      }).sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prev, next</span>) </span>{
        <span class="hljs-keyword">return</span> validCarriers.indexOf(prev) - validCarriers.indexOf(next);
      });
    }
  };
};</div></div></div></div></body></html>